<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç³»ç»Ÿé…ç½® - MoAgent</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        .config-section {
            max-width: 800px;
            margin: 0 auto;
        }

        .config-card {
            background: var(--background);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary-color);
        }

        .config-card h3 {
            margin-bottom: 20px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .config-group {
            margin-bottom: 20px;
        }

        .config-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .config-group .help-text {
            display: block;
            margin-top: 5px;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .config-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .status-badge.valid {
            background: #d1fae5;
            color: var(--success-color);
        }

        .status-badge.invalid {
            background: #fee;
            color: var(--danger-color);
        }

        .config-value {
            font-family: 'Courier New', monospace;
            background: var(--surface);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .toggle-switch {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .toggle-switch input {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>âš™ï¸ ç³»ç»Ÿé…ç½®</h1>
            <p class="subtitle">é…ç½®MoAgentçš„LLM APIå’Œç³»ç»Ÿå‚æ•°</p>
        </header>

        <!-- Navigation -->
        <nav class="nav">
            <a href="{{ url_for('index') }}" class="nav-link">é¦–é¡µ</a>
            <a href="{{ url_for('crawl_page') }}" class="nav-link">çˆ¬è™«</a>
            <a href="{{ url_for('rag_page') }}" class="nav-link">RAGç³»ç»Ÿ</a>
            <a href="{{ url_for('multi_agent_page') }}" class="nav-link">Multi-Agent</a>
            <a href="{{ url_for('dashboard') }}" class="nav-link">ç›‘æ§</a>
            <a href="{{ url_for('storage_page') }}" class="nav-link">å­˜å‚¨</a>
            <a href="{{ url_for('config_page') }}" class="nav-link active">é…ç½®</a>
        </nav>

        <!-- Configuration Sections -->
        <div class="config-section">
            <!-- LLM Configuration -->
            <div class="config-card">
                <h3>ğŸ¤– LLMé…ç½®</h3>

                <form id="llm-config-form" class="crawl-form">
                    <div class="config-group">
                        <label for="llm_provider">LLMæä¾›å•†</label>
                        <select id="llm_provider" name="llm_provider" class="form-select">
                            <option value="openai">OpenAI</option>
                            <option value="anthropic">Anthropic</option>
                            <option value="local">æœ¬åœ°æ¨¡å‹</option>
                        </select>
                        <span class="help-text">é€‰æ‹©LLMæœåŠ¡æä¾›å•†</span>
                    </div>

                    <div class="config-group">
                        <label for="llm_model">æ¨¡å‹åç§°</label>
                        <input
                            type="text"
                            id="llm_model"
                            name="llm_model"
                            class="form-input"
                            placeholder="gpt-4o-mini"
                        >
                        <span class="help-text">ä¾‹å¦‚: gpt-4o-mini, gpt-4, claude-3-sonnet</span>
                    </div>

                    <div class="config-group">
                        <label for="api_key">APIå¯†é’¥</label>
                        <input
                            type="password"
                            id="api_key"
                            name="api_key"
                            class="form-input"
                            placeholder="sk-..."
                        >
                        <span class="help-text">æ‚¨çš„APIå¯†é’¥å°†å®‰å…¨ä¿å­˜ï¼Œä»…ç”¨äºå½“å‰ä¼šè¯</span>
                    </div>

                    <div class="config-group">
                        <label for="api_base_url">APIåŸºç¡€URLï¼ˆå¯é€‰ï¼‰</label>
                        <input
                            type="url"
                            id="api_base_url"
                            name="api_base_url"
                            class="form-input"
                            placeholder="https://api.openai.com/v1"
                        >
                        <span class="help-text">è‡ªå®šä¹‰APIç«¯ç‚¹ï¼Œç”¨äºä»£ç†æˆ–æœ¬åœ°æœåŠ¡</span>
                    </div>

                    <div class="config-row">
                        <div class="config-group">
                            <label for="temperature">æ¸©åº¦ (0-2)</label>
                            <input
                                type="number"
                                id="temperature"
                                name="temperature"
                                class="form-input"
                                min="0"
                                max="2"
                                step="0.1"
                                value="0.3"
                            >
                            <span class="help-text">æ§åˆ¶è¾“å‡ºéšæœºæ€§</span>
                        </div>

                        <div class="config-group">
                            <label for="max_tokens">æœ€å¤§Tokenæ•°</label>
                            <input
                                type="number"
                                id="max_tokens"
                                name="max_tokens"
                                class="form-input"
                                min="100"
                                max="32000"
                                step="100"
                                value="800"
                            >
                            <span class="help-text">æœ€å¤§ç”Ÿæˆé•¿åº¦</span>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">ä¿å­˜LLMé…ç½®</button>
                </form>
            </div>

            <!-- Current Configuration Display -->
            <div class="config-card">
                <h3>ğŸ“‹ å½“å‰é…ç½®</h3>
                <div id="current-config">
                    <p>åŠ è½½ä¸­...</p>
                </div>
            </div>

            <!-- Quick Presets -->
            <div class="config-card">
                <h3>âš¡ å¿«é€Ÿé¢„è®¾</h3>
                <p class="help-text" style="margin-bottom: 15px;">
                    é€‰æ‹©é¢„è®¾é…ç½®å¿«é€Ÿè®¾ç½®LLM
                </p>
                <div class="features">
                    <div class="feature-card" style="padding: 20px;">
                        <h4>OpenAI GPT-4o-mini</h4>
                        <p>å¿«é€Ÿã€ç»æµã€é«˜è´¨é‡</p>
                        <button onclick="applyPreset('openai-mini')" class="btn btn-secondary">åº”ç”¨</button>
                    </div>

                    <div class="feature-card" style="padding: 20px;">
                        <h4>OpenAI GPT-4o</h4>
                        <p>æœ€å¼ºæ€§èƒ½ã€è¾ƒæ…¢</p>
                        <button onclick="applyPreset('openai-full')" class="btn btn-secondary">åº”ç”¨</button>
                    </div>

                    <div class="feature-card" style="padding: 20px;">
                        <h4>Anthropic Claude</h4>
                        <p>é•¿æ–‡æœ¬ã€é«˜è´¨é‡</p>
                        <button onclick="applyPreset('anthropic')" class="btn btn-secondary">åº”ç”¨</button>
                    </div>

                    <div class="feature-card" style="padding: 20px;">
                        <h4>è‡ªå®šä¹‰API</h4>
                        <p>ä½¿ç”¨è‡ªå®šä¹‰ç«¯ç‚¹</p>
                        <button onclick="applyPreset('custom')" class="btn btn-secondary">åº”ç”¨</button>
                    </div>
                </div>
            </div>

            <!-- Test Configuration -->
            <div class="config-card">
                <h3>ğŸ§ª æµ‹è¯•é…ç½®</h3>
                <p class="help-text" style="margin-bottom: 15px;">
                    æµ‹è¯•æ‚¨çš„LLMé…ç½®æ˜¯å¦æ­£å¸¸å·¥ä½œ
                </p>
                <button id="test-config" class="btn btn-primary">æµ‹è¯•è¿æ¥</button>
                <div id="test-result" style="margin-top: 15px; display: none;">
                    <!-- Test result will appear here -->
                </div>
            </div>

            <!-- System Configuration -->
            <div class="config-card">
                <h3>ğŸ”§ ç³»ç»Ÿé…ç½®</h3>

                <form id="system-config-form" class="crawl-form">
                    <div class="config-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="enable_rag" name="enable_rag">
                            <span>å¯ç”¨RAGç³»ç»Ÿï¼ˆéœ€è¦é‡å¯ï¼‰</span>
                        </label>
                        <span class="help-text">RAGç³»ç»Ÿéœ€è¦ChromaDBï¼Œé¦–æ¬¡åˆå§‹åŒ–éœ€è¦30-60ç§’</span>
                    </div>

                    <div class="config-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="use_llm_parsing" name="use_llm_parsing">
                            <span>ä½¿ç”¨LLMè§£æ</span>
                        </label>
                        <span class="help-text">ä½¿ç”¨LLMè¿›è¡Œæ™ºèƒ½å†…å®¹è§£æï¼ˆéœ€è¦APIå¯†é’¥ï¼‰</span>
                    </div>

                    <div class="config-group">
                        <label for="log_level">æ—¥å¿—çº§åˆ«</label>
                        <select id="log_level" name="log_level" class="form-select">
                            <option value="DEBUG">DEBUG</option>
                            <option value="INFO" selected>INFO</option>
                            <option value="WARNING">WARNING</option>
                            <option value="ERROR">ERROR</option>
                        </select>
                        <span class="help-text">æ§åˆ¶æ—¥å¿—è¾“å‡ºè¯¦ç»†ç¨‹åº¦</span>
                    </div>

                    <div class="config-row">
                        <div class="config-group">
                            <label for="max_concurrent">æœ€å¤§å¹¶å‘æ•°</label>
                            <input
                                type="number"
                                id="max_concurrent"
                                name="max_concurrent"
                                class="form-input"
                                min="1"
                                max="20"
                                value="5"
                            >
                            <span class="help-text">åŒæ—¶å¤„ç†çš„ä»»åŠ¡æ•°</span>
                        </div>

                        <div class="config-group">
                            <label for="timeout">è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰</label>
                            <input
                                type="number"
                                id="timeout"
                                name="timeout"
                                class="form-input"
                                min="5"
                                max="300"
                                value="30"
                            >
                            <span class="help-text">å•ä¸ªä»»åŠ¡è¶…æ—¶æ—¶é—´</span>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">ä¿å­˜ç³»ç»Ÿé…ç½®</button>
                </form>
            </div>

            <!-- Environment Variables Info -->
            <div class="config-card">
                <h3>ğŸ“ ç¯å¢ƒå˜é‡è¯´æ˜</h3>
                <div style="background: var(--surface); padding: 15px; border-radius: 8px; font-size: 0.9rem;">
                    <p style="margin-bottom: 10px;">
                        <strong>å½“å‰é…ç½®ä»…ä¿å­˜åœ¨æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ä¸­ã€‚</strong>
                    </p>
                    <p style="margin-bottom: 10px;">
                        å¦‚éœ€æ°¸ä¹…ä¿å­˜ï¼Œè¯·åœ¨ <code>configs/.env</code> æ–‡ä»¶ä¸­è®¾ç½®ï¼š
                    </p>
                    <pre style="background: var(--background); padding: 10px; border-radius: 4px; overflow-x: auto;"><code># LLMé…ç½®
LLM_PROVIDER=openai
LLM_MODEL=gpt-4o-mini
OPENAI_API_KEY=sk-your-key-here
LLM_API_BASE_URL=https://api.openai.com/v1
LLM_TEMPERATURE=0.3
LLM_MAX_TOKENS=800

# ç³»ç»Ÿé…ç½®
LOG_LEVEL=INFO
MAX_CONCURRENT=5
TIMEOUT=30
USE_LLM_PARSING=false
RAG_ENABLED=false</code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/config.js') }}"></script>
</body>
</html>
